version: '3.7'

services:
  web:
    build: .
    volumes:
      - type: volume
        source: ym_persistent_dev
        target: /home/srx-yamlr
      - type: bind
        source: ./
        target: /opt/srx-yamlr
    ports:
      - "8000:8000"
    env_file:
      - .env
    command: python manage.py runserver 0.0.0.0:8000

  selenium_hub:
    container_name: selenium_hub
    image: selenium/hub
    ports:
      - "4444:4444"

  selenium_chrome:
    container_name: selenium_chrome
    image: selenium/node-chrome
    environment:
      - HUB_PORT_4444_TCP_ADDR=selenium_hub
      - HUB_PORT_4444_TCP_PORT=4444
    ports:
      - "5900:5900"
    depends_on:
      - selenium_hub

volumes:
  ym_persistent_dev: